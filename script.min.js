// Social Shares Bookmarklet by Callum Macrae (@callumacrae)
var socialBookmarkletCallbacks={};
(function(){function e(a,c,d){d||(a.dataset.countsLastRequest=Date.now());a.dataset.countsTwitter=c.twitter;a.dataset.countsFacebook=c.facebook;d=b.getElementsByTagName("a")[0];d.href=a.href;d.innerHTML=a.href;b.getElementsByTagName("span")[0].innerHTML="Twitter: "+c.twitter+", Facebook: "+c.facebook;b.style.display="block"}function f(a){return Array(a).join().split(",").map(function(){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(52*Math.random()))}).join("")}function g(a){var c=
	document.createElement("script");c.async=!0;c.src=a;document.body.appendChild(c)}var h=encodeURIComponent,b=document.createElement("div");b.className="socialBookmarkletDiv";b.style.position="fixed";b.style.top=b.style.right=0;b.style.display="none";b.style.background="white";b.style.border="1px black solid";b.style.padding="2px 5px";b.style.fontSize="14pt";b.innerHTML="<a></a><br><span></span>";document.body.appendChild(b);document.addEventListener("mouseover",function(a){var c=a.target?a.target:
	a.srcElement;if("A"===c.tagName&&/^https?:\/\//.test(c.href)){var b={};a=c.dataset;Number(a.countsLastRequest)+5E3>Date.now()?(b.facebook=a.countsFacebook,b.twitter=a.countsTwitter,e(c,b,!0)):(a=f(16),socialBookmarkletCallbacks[a]=function(a){b.twitter=a.count;"undefined"!==typeof b.facebook&&e(c,b)},g("http://urls.api.twitter.com/1/urls/count.json?url="+h(c.href)+"&callback=socialBookmarkletCallbacks."+a),a=f(16),socialBookmarkletCallbacks[a]=function(a){b.facebook=a.shares||0;"undefined"!==typeof b.twitter&&
e(c,b)},g("https://graph.facebook.com/?id="+h(c.href)+"&callback=socialBookmarkletCallbacks."+a))}});document.addEventListener("mouseout",function(a){"A"===(a.target?a.target:a.srcElement).tagName&&(b.style.display="none")})})();